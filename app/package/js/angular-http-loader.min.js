angular.module("ng.httpLoader",["ng.httpLoader.httpMethodInterceptor"]).directive("ngHttpLoader",["$rootScope","$parse","$timeout",function(a,b,c){return{scope:{methods:"@",template:"@",title:"@",ttl:"@"},template:'<div class="http-loader__wrapper" ng-include="template" ng-show="showLoader"></div>',link:function(d){var e=b(d.methods)()||d.methods;e=angular.isUndefined(e)?[]:e,e=angular.isArray(e)?e:[e],angular.forEach(e,function(a,b){e[b]=a.toUpperCase()});var f=b(d.ttl)()||d.ttl;f=angular.isUndefined(f)?0:f,f=1e3*Number(f),f=angular.isNumber(f)?f:0,Array.prototype.indexOf||(e.indexOf=function(a){for(var b=this.length;b--;)if(this[b]===a)return b;return-1}),d.showLoader=!1;var g,h=d.showLoader,i=function(a,b){return-1!==e.indexOf(b.toUpperCase())?h="loaderShow"===a.name:0===e.length&&(h="loaderShow"===a.name),0>=f||!g&&!h?void(d.showLoader=h):void(g||(d.showLoader=h,g=c(function(){h||(d.showLoader=h),g=void 0},f)))};a.$on("loaderShow",i),a.$on("loaderHide",i)}}}]),angular.module("ng.httpLoader.httpMethodInterceptor",[]).provider("httpMethodInterceptor",function(){var a=[],b=[],c=!1;this.whitelistDomain=function(b){a.push(b)},this.blacklistDomain=function(a){b.push(a)},this.whitelistLocalRequests=function(){c=!0},this.$get=["$q","$rootScope",function(d,e){var f=0,g=function(d){if("//"!==d.substring(0,2)&&-1===d.indexOf("://")&&c)return!0;for(var e=a.length;e--;)if(-1!==d.indexOf(a[e]))return!0;for(var f=b.length;f--;)if(-1!==d.indexOf(b[f]))return!1;return!1},h=function(a){g(a.url)&&0===--f&&e.$emit("loaderHide",a.method)};return{request:function(a){return g(a.url)&&(f++,e.$emit("loaderShow",a.method)),a||d.when(a)},response:function(a){return h(a.config),a||d.when(a)},responseError:function(a){return h(a.config),d.reject(a)}}}]}).config(["$httpProvider",function(a){a.interceptors.unshift("httpMethodInterceptor")}]);